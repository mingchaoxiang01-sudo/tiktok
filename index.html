<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Get Coins</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
      /* Hide scrollbar for Chrome, Safari and Opera */
      .no-scrollbar::-webkit-scrollbar {
        display: none;
      }
      /* Hide scrollbar for IE, Edge and Firefox */
      .no-scrollbar {
        -ms-overflow-style: none;  /* IE and Edge */
        scrollbar-width: none;  /* Firefox */
      }
      /* Custom loader animation delay */
      .animation-delay-200 {
        animation-delay: 0.2s;
      }
      /* Smooth fade in */
      @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
      }
      @keyframes zoomIn {
        from { transform: scale(0.95); opacity: 0; }
        to { transform: scale(1); opacity: 1; }
      }
      .animate-in-fade {
        animation: fadeIn 0.2s ease-out forwards;
      }
      .animate-in-zoom {
        animation: zoomIn 0.2s ease-out forwards;
      }
    </style>
  <script type="importmap">
{
  "imports": {
    "react": "https://aistudiocdn.com/react@^19.2.1",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.1/",
    "react/": "https://aistudiocdn.com/react@^19.2.1/",
    "lucide-react": "https://aistudiocdn.com/lucide-react@^0.559.0"
  }
}
</script>
</head>
  <body class="bg-gray-50 text-gray-900 font-sans antialiased">
    <div id="root"></div>

    <script type="text/babel">
      const { useState, useEffect, useRef } = React;

      // --- Icons (Inline SVGs to replace Lucide) ---
      const ChevronLeft = ({ className }) => (
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m15 18-6-6 6-6"/></svg>
      );
      const RotateCcw = ({ className }) => (
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 12"/><path d="M3 3v9h9"/></svg>
      );
      const FileText = ({ className }) => (
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/></svg>
      );
      const HelpCircle = ({ className }) => (
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><path d="M12 17h.01"/></svg>
      );
      const ChevronRight = ({ className }) => (
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m9 18 6-6-6-6"/></svg>
      );
      const Smartphone = ({ className }) => (
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect width="14" height="20" x="5" y="2" rx="2" ry="2"/><path d="M12 18h.01"/></svg>
      );
      const Check = ({ className }) => (
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polyline points="20 6 9 17 4 12"/></svg>
      );

      // --- Constants ---
      const COIN_RATE = 0.01067;
      const COIN_PACKAGES = [
        { id: '1', coins: 30, price: 0.32 },
        { id: '2', coins: 350, price: 3.70 },
        { id: '3', coins: 700, price: 7.40 },
        { id: '4', coins: 1400, price: 14.80 },
        { id: '5', coins: 3500, price: 36.99 },
        { id: 'custom', coins: null, price: 0, label: 'Custom' },
      ];

      // --- Components ---

      const Header = () => {
        return (
          <header className="sticky top-0 z-10 flex items-center justify-between px-4 py-3 bg-white border-b border-gray-100">
            <div className="flex items-center">
              <button className="p-1 -ml-1 hover:bg-gray-100 rounded-full">
                <ChevronLeft className="w-6 h-6 text-gray-800" />
              </button>
            </div>
            <h1 className="text-lg font-bold text-gray-900">Get coins</h1>
            <div className="flex items-center space-x-4">
              <button className="text-gray-600 hover:text-gray-900">
                <RotateCcw className="w-5 h-5" />
              </button>
              <button className="text-gray-600 hover:text-gray-900">
                <FileText className="w-5 h-5" />
              </button>
              <button className="text-gray-600 hover:text-gray-900">
                <HelpCircle className="w-5 h-5" />
              </button>
            </div>
          </header>
        );
      };

      const CoinGrid = ({ selectedId, onSelect, customAmount, onCustomChange }) => {
        const customInputRef = useRef(null);

        const formatPrice = (price) => {
          return `US$${price.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;
        };

        const handleCustomClick = () => {
          if (selectedId !== 'custom') {
            const currentVal = Number(customAmount) || 0;
            onSelect('custom', currentVal);
          }
          setTimeout(() => {
              customInputRef.current?.focus();
          }, 10);
        };

        const handleCustomInputChange = (e) => {
          const val = e.target.value.replace(/[^0-9]/g, '');
          onCustomChange(val);
          if (val) {
              onSelect('custom', parseInt(val, 10));
          } else {
              onSelect('custom', 0);
          }
        };

        return (
          <div className="grid grid-cols-3 gap-3 px-4 mt-6">
            {COIN_PACKAGES.map((pkg) => {
              const isSelected = selectedId === pkg.id;
              const isCustom = pkg.id === 'custom';

              if (isCustom) {
                return (
                  <div
                    key={pkg.id}
                    onClick={handleCustomClick}
                    className={`
                      relative flex flex-col items-center justify-center p-3 rounded-lg border cursor-pointer transition-all aspect-[4/3]
                      ${isSelected 
                        ? 'border-[#FE2C55] bg-red-50 ring-1 ring-[#FE2C55] ring-opacity-20' 
                        : 'border-gray-200 bg-white hover:border-gray-300'}
                    `}
                  >
                    <div className="flex items-center justify-center space-x-1 mb-1 w-full">
                      <div className="w-5 h-5 rounded-full bg-yellow-400 flex items-center justify-center text-[10px] text-white font-bold border border-yellow-500 shrink-0 shadow-sm">
                         <svg viewBox="0 0 24 24" fill="currentColor" className="w-3 h-3 text-white"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15v-2h2v2h-2zm1-13c2.76 0 5 2.24 5 5 0 2.22-1.21 4.15-3 4.8V15h-2v-2.5c2.21-.5 4-2.29 4-4.5 0-2.21-1.79-4-4-4s-4 1.79-4 4H8c0-3.31 2.69-6 6-6z" opacity="0"></path><path d="M13 10V9c0-1.03-.73-1.89-1.7-1.98C10.74 6.96 10.3 7.29 10.1 7.64L9 8.2l-1.3-1.6 1.4-.9c.6-.4 1.3-.6 2.1-.6 2.1 0 3.8 1.7 3.8 3.8 0 1.5-.9 2.9-2.2 3.5l.2.3H11v-1l2-1.2z" fill="white"></path><path d="M11.5,5.5 C13.5,5.5 15,6.8 15,8.5 C15,9.8 14.2,10.8 13,11.5 L13,12.5 L11,12.5 L11,11 C12.2,10.5 13,9.8 13,8.5 C13,7.8 12.3,7.2 11.5,7.2 C10.8,7.2 10.2,7.7 10,8.3 L8.5,7.5 C9,6.2 10.1,5.5 11.5,5.5 Z" fill="white"></path></svg>
                         <span className="font-bold text-white shadow-sm">‚ô™</span>
                      </div>
                      {isSelected ? (
                         <input 
                           ref={customInputRef}
                           type="tel"
                           value={customAmount}
                           onChange={handleCustomInputChange}
                           className="w-16 bg-transparent text-center font-bold text-gray-900 outline-none text-sm p-0 m-0 placeholder-gray-300"
                           placeholder="0"
                           autoFocus
                         />
                      ) : (
                         <span className="font-bold text-gray-900 text-sm">Custom</span>
                      )}
                    </div>
                    
                    {isSelected && customAmount ? (
                       <span className="text-xs text-gray-500 font-medium">
                          {formatPrice(Number(customAmount) * COIN_RATE)}
                       </span>
                    ) : (
                       !isSelected && <div className="h-4"></div>
                    )}
                  </div>
                );
              }

              return (
                <div
                  key={pkg.id}
                  onClick={() => onSelect(pkg.id, pkg.coins)}
                  className={`
                    flex flex-col items-center justify-center p-3 rounded-lg border cursor-pointer transition-all aspect-[4/3]
                    ${isSelected 
                      ? 'border-[#FE2C55] bg-red-50 ring-1 ring-[#FE2C55] ring-opacity-20' 
                      : 'border-gray-200 bg-white hover:border-gray-300'}
                  `}
                >
                  <div className="flex items-center space-x-1 mb-1">
                    <div className="w-5 h-5 rounded-full bg-yellow-400 flex items-center justify-center text-[10px] text-white font-bold border border-yellow-500 shrink-0 shadow-sm">
                        <span className="font-bold text-white shadow-sm">‚ô™</span>
                    </div>
                    <span className="font-bold text-gray-900 text-sm">{pkg.coins.toLocaleString()}</span>
                  </div>
                  <span className="text-xs text-gray-500 font-medium">{formatPrice(pkg.price)}</span>
                </div>
              );
            })}
          </div>
        );
      };

      const ProcessingModal = ({ status, username }) => {
        const [secondsRemaining, setSecondsRemaining] = useState(300);

        useEffect(() => {
          if (status === 'processing') {
            const interval = setInterval(() => {
              setSecondsRemaining((prev) => (prev > 0 ? prev - 1 : 0));
            }, 1000);
            return () => clearInterval(interval);
          } else {
            setSecondsRemaining(300);
          }
        }, [status]);

        if (status !== 'processing') return null;

        const formatTime = (totalSeconds) => {
          const m = Math.floor(totalSeconds / 60);
          const s = totalSeconds % 60;
          return `${m}:${s.toString().padStart(2, '0')}`;
        };

        return (
          <div className="fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm px-8 animate-in-fade">
            <div className="bg-white w-full max-w-sm rounded-xl p-8 flex flex-col items-center text-center shadow-2xl animate-in-zoom">
              <div className="flex space-x-3 mb-6">
                <div className="w-5 h-5 rounded-full bg-[#FE2C55] animate-bounce"></div>
                <div className="w-5 h-5 rounded-full bg-[#25F4EE] animate-bounce animation-delay-200"></div>
              </div>
              <h2 className="text-xl font-bold text-gray-900 mb-2">Processing your payment</h2>
              <p className="text-gray-500 text-sm mb-6">This could take a few seconds</p>
              <div className="text-xl font-mono text-gray-400 font-medium">
                {formatTime(secondsRemaining)}
              </div>
            </div>
          </div>
        );
      };

      const SuccessModal = ({ status, username, coins, onClose }) => {
        if (status !== 'success') return null;

        return (
          <div className="fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm px-6 animate-in-fade">
            <div className="bg-white w-full max-w-sm rounded-2xl p-6 flex flex-col items-center text-center shadow-2xl animate-in-zoom">
              <div className="w-20 h-20 rounded-full bg-green-100 flex items-center justify-center mb-4">
                <div className="w-14 h-14 rounded-full bg-green-400 flex items-center justify-center shadow-lg shadow-green-200">
                  <Check className="w-8 h-8 text-white stroke-[4]" />
                </div>
              </div>
              <h2 className="text-xl font-bold text-gray-900 mb-4">Successful Recharge</h2>
              <p className="text-gray-600 mb-1">
                <span className="font-bold text-gray-900">{coins.toLocaleString()} Coins</span> were sent to <span className="font-bold text-gray-900">@{username || 'user'}</span>
              </p>
              <p className="text-xs text-gray-400 mb-6 px-4">
                This operation has been completed. It will be processed within 24 hours!
              </p>
              <button 
                onClick={onClose}
                className="bg-[#FE2C55] text-white font-bold py-3 px-8 rounded-lg w-full max-w-[200px] hover:bg-[#e62046] transition-colors"
              >
                Go Back
              </button>
            </div>
          </div>
        );
      };

      const PaymentIcon = ({ type }) => {
        if (type === 'visa') return <span className="font-black text-[10px] text-[#1A1F71] italic tracking-tighter">VISA</span>;
        if (type === 'mastercard') return <div className="flex -space-x-1.5"><div className="w-4 h-4 rounded-full bg-[#EB001B]"></div><div className="w-4 h-4 rounded-full bg-[#F79E1B]"></div></div>;
        if (type === 'maestro') return <div className="flex -space-x-1.5"><div className="w-4 h-4 rounded-full bg-[#CC0000]"></div><div className="w-4 h-4 rounded-full bg-[#0099CC]"></div></div>;
        if (type === 'amex') return <div className="bg-[#2E77BC] w-5 h-3.5 rounded-[2px] flex items-center justify-center"><span className="text-[6px] text-white font-bold">AMEX</span></div>;
        if (type === 'paypal') return <span className="font-bold text-[10px] text-[#003087] italic">PayPal</span>;
        return null;
      };

      const App = () => {
        const [username, setUsername] = useState('');
        const [usernameError, setUsernameError] = useState(false);
        const [selectedPackageId, setSelectedPackageId] = useState('1');
        const [selectedCoins, setSelectedCoins] = useState(30);
        const [customAmount, setCustomAmount] = useState('');
        const [paymentStatus, setPaymentStatus] = useState('idle');

        const totalPrice = selectedCoins * COIN_RATE;

        useEffect(() => {
          if (paymentStatus === 'processing') {
            // Simulate 2 seconds of processing then success
            const timer = setTimeout(() => {
              setPaymentStatus('success');
            }, 2000);
            return () => clearTimeout(timer);
          }
        }, [paymentStatus]);

        const handleCoinSelect = (id, coins) => {
          setSelectedPackageId(id);
          setSelectedCoins(coins);
        };

        const handleRecharge = () => {
          if (!username.trim()) {
            setUsernameError(true);
            return;
          }
          setUsernameError(false);

          if (selectedCoins <= 0) {
              alert("Please select a valid amount");
              return;
          }
          setPaymentStatus('processing');
        };

        const handleReset = () => {
          setPaymentStatus('idle');
        };

        return (
          <div className="min-h-screen bg-white max-w-md mx-auto relative shadow-2xl overflow-hidden flex flex-col">
            <Header />

            <main className="flex-1 overflow-y-auto pb-32 no-scrollbar">
              <div className="px-4 mt-4">
                <h2 className="text-sm font-bold text-gray-800">Recharge:</h2>
                <p className="text-xs text-[#FE2C55] mt-1">
                  Save upto 25% compared to in-app purchase
                </p>
              </div>

              <div className="px-4 mt-6">
                <div className={`flex items-center space-x-3 p-2 rounded-lg border ${usernameError ? 'border-red-500 bg-red-50' : 'border-transparent'}`}>
                  <div className="w-10 h-10 rounded-full bg-black flex items-center justify-center shrink-0">
                     <svg fill="white" viewBox="0 0 24 24" className="w-6 h-6">
                       <path d="M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 1 0-1 13.6 6.84 6.84 0 0 0 6.82-6.85V7.97a7.3 7.3 0 0 0 4.39 1.42V6.07a5.91 5.91 0 0 1-1-.8z"/>
                     </svg>
                  </div>
                  <input
                    type="text"
                    value={username}
                    onChange={(e) => {
                      setUsername(e.target.value);
                      if (e.target.value) setUsernameError(false);
                    }}
                    placeholder="Enter username"
                    className="flex-1 text-gray-900 placeholder-gray-400 text-lg outline-none bg-transparent"
                  />
                </div>
                {usernameError && (
                  <p className="text-red-500 text-xs mt-1 ml-14">Please enter a username</p>
                )}
              </div>

              <CoinGrid 
                selectedId={selectedPackageId} 
                onSelect={handleCoinSelect}
                customAmount={customAmount}
                onCustomChange={setCustomAmount}
              />

              <div className="px-4 mt-8">
                <div className="flex items-center justify-between p-0 cursor-pointer hover:bg-gray-50 rounded-lg transition-colors">
                  <div className="flex items-center space-x-3">
                    <div className="text-2xl">üëèü™ô</div>
                    <div>
                      <h3 className="text-sm font-bold text-gray-900">Invite & Get Rewards</h3>
                      <p className="text-xs text-gray-500">Check out this new feature!</p>
                    </div>
                  </div>
                  <div className="text-gray-400">
                    <ChevronRight className="w-5 h-5" />
                  </div>
                </div>
              </div>

              <div className="px-4 mt-6 mb-8">
                  <div className="bg-gray-50 rounded-lg p-3 flex items-start space-x-3 border border-gray-100 cursor-pointer active:scale-[0.98] transition-transform">
                      <div className="bg-blue-100 p-2 rounded-md">
                          <Smartphone className="w-6 h-6 text-blue-500" />
                      </div>
                      <div className="flex-1">
                          <p className="text-xs font-semibold text-gray-900 leading-tight">
                              Add this page to the mobile desktop for easy access with just one click
                          </p>
                      </div>
                  </div>
              </div>
              
              <div className="px-4 mt-2">
                 <div className="flex items-center justify-between text-xs font-bold text-gray-600 mb-2">
                     <span>Payment method</span>
                     <div className="flex items-center space-x-2">
                         <PaymentIcon type="visa" />
                         <PaymentIcon type="mastercard" />
                         <PaymentIcon type="maestro" />
                         <PaymentIcon type="amex" />
                         <PaymentIcon type="paypal" />
                     </div>
                 </div>
              </div>
            </main>

            <footer className="bg-white border-t border-gray-100 p-4 pb-8 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)] z-20">
              <div className="flex items-center justify-between mb-3">
                <div className="text-sm font-bold text-gray-900">
                  Total: ${totalPrice.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}
                </div>
              </div>
              <button 
                onClick={handleRecharge}
                className="w-full bg-[#FE2C55] text-white font-bold py-3.5 rounded-lg text-lg hover:bg-[#e62046] transition-colors active:scale-[0.98] transform duration-100 shadow-md shadow-red-200"
              >
                Recharge
              </button>
            </footer>

            <ProcessingModal status={paymentStatus} username={username} />
            <SuccessModal status={paymentStatus} username={username} coins={selectedCoins} onClose={handleReset} />
          </div>
        );
      };

      const root = ReactDOM.createRoot(document.getElementById('root'));
      root.render(<App />);
    </script>
  </body>
</html>