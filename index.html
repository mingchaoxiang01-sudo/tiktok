<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TikTok Coin Recharge</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      body {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        background-color: #f2f2f2;
      }
      /* Hide scrollbar for Chrome, Safari and Opera */
      .no-scrollbar::-webkit-scrollbar {
        display: none;
      }
      /* Hide scrollbar for IE, Edge and Firefox */
      .no-scrollbar {
        -ms-overflow-style: none;  /* IE and Edge */
        scrollbar-width: none;  /* Firefox */
      }
      /* Animations */
      @keyframes slideUp {
        from { transform: translateY(100%); opacity: 0; }
        to { transform: translateY(0); opacity: 1; }
      }
      .animate-slide-up { animation: slideUp 0.3s cubic-bezier(0.16, 1, 0.3, 1) forwards; }

      @keyframes scaleIn {
        from { transform: scale(0.9); opacity: 0; }
        to { transform: scale(1); opacity: 1; }
      }
      .animate-scale-in { animation: scaleIn 0.2s ease-out forwards; }
    </style>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel for JSX/TSX transformation in browser -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@^19.2.3",
    "react-dom/": "https://esm.sh/react-dom@^19.2.3/",
    "react/": "https://esm.sh/react@^19.2.3/"
  }
}
</script>
</head>
  <body>
    <div id="root"></div>

    <script type="text/babel" data-presets="typescript,react">
      const { useState, useEffect } = React;

      // --- Types & Constants ---
      
      const COIN_PACKAGES = [
        { id: '1', coins: 70, price: 0.74 },
        { id: '2', coins: 350, price: 3.70 },
        { id: '3', coins: 700, price: 7.40 },
        { id: '4', coins: 1400, price: 14.80 },
        { id: '5', coins: 3500, price: 36.99 },
        { id: '6', coins: 7000, price: 73.99 },
        { id: '7', coins: 17500, price: 184.97 },
        { id: 'custom', coins: null, price: null, isCustom: true },
      ];

      const EXCHANGE_RATE = 0.01057;

      // --- Icons ---

      const TikTokLogo = ({ className = "w-6 h-6" }) => (
        <svg viewBox="0 0 32 32" className={className} fill="none">
          <circle cx="16" cy="16" r="16" fill="black"/>
          <path d="M22.5 11.5c-1.2 0-2.3-.4-3.2-1.2v9.1c0 3.2-2.6 5.8-5.8 5.8-3.2 0-5.8-2.6-5.8-5.8s2.6-5.8 5.8-5.8c.3 0 .6 0 .9.1v3.3c-.3-.1-.5-.1-.8-.1-1.4 0-2.5 1.1-2.5 2.5s1.1 2.5 2.5 2.5c1.4 0 2.5-1.1 2.5-2.5V6h3.3c0 1.9 1.5 3.4 3.4 3.5v2h-.3z" fill="white"/>
        </svg>
      );

      const TikTokCoin = ({ className = "w-6 h-6" }) => (
        <svg viewBox="0 0 32 32" fill="none" className={className}>
          <circle cx="16" cy="16" r="16" fill="#F8C339" />
          <circle cx="16" cy="16" r="11.5" fill="#FBD863" />
          <path d="M21.2 10.8C20.5 10.8 19.8 10.6 19.2 10.2V7H16.8V16.6C16.8 18.2 15.5 19.5 13.9 19.5C12.3 19.5 11 18.2 11 16.6C11 15 12.3 13.7 13.9 13.7C14.1 13.7 14.3 13.7 14.5 13.8V11.3C14.3 11.3 14.1 11.3 13.9 11.3C11 11.3 8.6 13.7 8.6 16.6C8.6 19.5 11 21.9 13.9 21.9C16.8 21.9 19.2 19.5 19.2 16.6V12.2C20.3 12.8 21.6 13.1 23 13.2V10.8C22.4 10.8 21.8 10.8 21.2 10.8Z" fill="#FA5A39" />
        </svg>
      );

      const CoinIcon = TikTokCoin;

      const ChevronLeft = ({ className = "w-6 h-6" }) => (
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
          <polyline points="15 18 9 12 15 6"></polyline>
        </svg>
      );

      const XIcon = ({ className = "w-6 h-6" }) => (
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      );

      const HelpCircle = ({ className = "w-6 h-6" }) => (
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
          <circle cx="12" cy="12" r="10"></circle>
          <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
          <line x1="12" y1="17" x2="12.01" y2="17"></line>
        </svg>
      );

      const Check = ({ className = "w-6 h-6" }) => (
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="4" strokeLinecap="round" strokeLinejoin="round" className={className}>
          <polyline points="20 6 9 17 4 12"></polyline>
        </svg>
      );

      const Backspace = ({ className = "w-6 h-6" }) => (
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
          <path d="M21 4H8l-7 8 7 8h13a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z"></path>
          <line x1="18" y1="9" x2="12" y2="15"></line>
          <line x1="12" y1="9" x2="18" y2="15"></line>
        </svg>
      );

      const ChevronDown = ({ className = "w-4 h-4" }) => (
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
          <polyline points="6 9 12 15 18 9"></polyline>
        </svg>
      );

      const VisaIcon = ({ className = "h-6" }) => (
        <svg viewBox="0 0 50 32" className={className} fill="none" xmlns="http://www.w3.org/2000/svg">
           <g transform="translate(7 10) scale(1.5)">
              <path d="M9.90704 0.0898438L6.87842 7.50284H4.80859L2.83515 1.55198C2.72081 1.09673 2.61869 0.992686 2.29828 0.812328C1.75836 0.518625 0.835565 0.352427 0.03125 0.177439L0.0967732 0.0911786H3.63351C4.08866 0.0911786 4.5161 0.406969 4.61858 0.992775L5.49479 5.67202L8.29749 0.0898438H9.90704ZM14.3644 5.16335C14.379 3.23847 11.6601 3.13601 11.682 2.24765C11.6918 1.96865 11.9692 1.66699 12.636 1.56449C12.9688 1.51336 13.8967 1.48135 14.3718 1.7067L14.6565 0.380649C14.269 0.236611 13.7725 0.0818276 13.1511 0.0818276C11.5336 0.0818276 10.3934 0.954201 10.3544 2.19363C10.3082 3.14126 11.1668 3.67341 11.8015 3.9901C12.4491 4.31215 12.6677 4.51697 12.6628 4.80901C12.6506 5.25306 12.1325 5.45263 11.643 5.45263C10.8242 5.45263 10.3446 5.22869 9.96918 5.04833L9.67203 6.44855C10.0544 6.6289 10.7633 6.78458 11.5432 6.79185C13.2263 6.79185 14.3425 5.94096 14.3644 5.16335ZM18.5721 6.68962H20.2477L19.1687 1.55198C19.0348 0.966075 18.5673 0.698375 18.0654 0.698375H16.4896L15.6027 4.96577L15.2253 6.68962H17.0259C17.0259 6.68962 17.3182 5.86095 17.3815 5.62646C17.4473 5.62913 18.2507 5.62913 19.0031 5.62913C19.0811 5.99222 19.1638 6.39893 19.2271 6.68962H18.5721ZM17.876 3.2625C17.9856 2.82236 18.1415 2.07223 18.1415 2.07223C18.1293 2.08692 18.3314 2.61933 18.5526 3.2625H17.876ZM23.9688 6.68962H22.3708L21.3939 0.0911786H23.0894L23.9688 6.68962Z" fill="#1A1F71"/>
           </g>
        </svg>
      );

      const MastercardIcon = ({ className = "h-6" }) => (
        <svg viewBox="0 0 50 32" className={className} fill="none">
          <circle cx="19" cy="16" r="8" fill="#EB001B"/>
          <circle cx="31" cy="16" r="8" fill="#F79E1B" fillOpacity="0.9"/>
        </svg>
      );

      const DinersClubIcon = ({ className = "h-6" }) => (
        <svg viewBox="0 0 50 32" className={className} fill="none">
          <path d="M19 8C14.5817 8 11 11.5817 11 16C11 20.4183 14.5817 24 19 24C23.4183 24 27 20.4183 27 16C27 11.5817 23.4183 8 19 8ZM19 22C15.6863 22 13 19.3137 13 16C13 12.6863 15.6863 10 19 10C22.3137 10 25 12.6863 25 16C25 19.3137 22.3137 22 19 22Z" fill="#0072CE"/>
          <path d="M29 8C27.5 8 26.1 8.4 24.9 9.1C25.6 11.1 26 13.5 26 16C26 18.5 25.6 20.9 24.9 22.9C26.1 23.6 27.5 24 29 24C33.4183 24 37 20.4183 37 16C37 11.5817 33.4183 8 29 8Z" fill="#0072CE"/>
        </svg>
      );

      const DiscoverIcon = ({ className = "h-6" }) => (
        <svg viewBox="0 0 80 32" className={className} fill="none">
          <text x="0" y="22" fontFamily="sans-serif" fontSize="12" fontWeight="bold" fill="black">DISCOVER</text>
          <circle cx="48" cy="18" r="4" fill="#F9A021"/>
        </svg>
      );

      const MaestroIcon = ({ className = "h-6" }) => (
        <svg viewBox="0 0 50 32" className={className} fill="none">
          <circle cx="19" cy="16" r="8" fill="#EB001B"/>
          <circle cx="31" cy="16" r="8" fill="#00539F" fillOpacity="0.9"/>
        </svg>
      );

      const AmexIcon = ({ className = "h-6" }) => (
        <svg viewBox="0 0 50 32" className={className} fill="none">
          <rect x="4" y="5" width="42" height="22" rx="3" fill="#006FCF"/>
          <path d="M12.5 19.5h-1.5l-0.8-2h-2.8l-0.8 2h-1.7l3-7.5h1.7l2.9 7.5zm-2.8-3.2h1.8l-0.9-2.5-0.9 2.5zm5.8 3.2h-1.5v-7.5h2.5l1.8 4.5 1.8-4.5h2.4v7.5h-1.5v-5.2l-2 4.9h-1.3l-2-4.9v5.2zm9.5 0h-1.5v-7.5h5.5v1.3h-4v1.8h3.5v1.3h-3.5v1.8h4v1.3h-5.5zm4.8 0h-1.6l2.5-3.5-2.4-4h1.8l1.5 2.6 1.4-2.6h1.7l-2.3 4 2.5 3.5h-1.8l-1.6-2.5-1.7 2.5z" fill="white" transform="translate(0, 0)"/>
        </svg>
      );

      const PayPalIcon = ({ className = "h-6" }) => (
        <svg viewBox="0 0 50 32" className={className} fill="none">
          <text x="14" y="21" fontSize="11" fontWeight="bold" fill="#003087" fontFamily="sans-serif" letterSpacing="-0.5">Pay</text>
          <text x="32" y="21" fontSize="11" fontWeight="bold" fill="#009cde" fontFamily="sans-serif" letterSpacing="-0.5">Pal</text>
        </svg>
      );

      // --- Components ---

      const Keypad = ({ onPress, onDelete }) => {
        const keys = ['1', '2', '3', '4', '5', '6', '7', '8', '9'];

        return (
          <div className="grid grid-cols-3 gap-y-2 px-6 pb-4">
            {keys.map((k) => (
              <button
                key={k}
                onClick={() => onPress(k)}
                className="text-2xl font-semibold py-2.5 rounded-full active:bg-gray-100"
              >
                {k}
              </button>
            ))}
            <div className="py-2.5"></div>
            <button
              onClick={() => onPress('0')}
              className="text-2xl font-semibold py-2.5 rounded-full active:bg-gray-100"
            >
              0
            </button>
            <button
              onClick={onDelete}
              className="flex items-center justify-center py-2.5 rounded-full active:bg-gray-100"
            >
              <Backspace className="w-6 h-6 text-gray-400" />
            </button>
          </div>
        );
      };

      const HomeView = ({ 
        balance, 
        username, 
        setUsername, 
        handlePackageSelect,
        selectedPkgId,
        pendingPrice,
        onRechargeClick
      }) => (
        <div className="bg-white flex flex-col h-full">
          {/* Header */}
          <div className="flex items-center px-4 py-3 bg-white">
            <TikTokLogo className="w-12 h-12" />
            <div className="ml-3 flex flex-col justify-center">
              <div className="font-bold text-[17px] leading-tight text-gray-900">Recharge</div>
              <div className="flex items-center gap-1 mt-0.5">
                   <TikTokCoin className="w-3.5 h-3.5" />
                   <span className="text-gray-400 text-[13px] font-semibold tracking-wide">{balance.toLocaleString('en-US')}</span>
              </div>
            </div>
            <div className="ml-auto flex items-center text-gray-800">
               <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 6h16M4 12h16m-7 6h7" /></svg>
            </div>
          </div>

          {/* Content */}
          <div className="px-4 flex flex-col">
            <div className="mt-1 mb-2">
              <h1 className="text-xl font-bold mb-0.5">Get Coins</h1>
              <div className="text-[13px] text-gray-500 font-bold">Recharge:</div>
              <div className="text-[#FE2C55] text-[13px] font-medium">Save upto 25% compared to in-app purchase</div>
            </div>

            <div className="bg-gray-100 rounded-lg px-3 py-2.5 mb-3 border border-transparent focus-within:border-gray-300 transition-colors">
              <input 
                type="text" 
                value={username}
                onChange={(e) => setUsername(e.target.value)}
                placeholder="Enter username"
                className="bg-transparent w-full outline-none text-gray-900 font-medium placeholder-gray-400 text-sm"
              />
            </div>

            <div className="grid grid-cols-2 gap-2 mb-2">
              {COIN_PACKAGES.map((pkg) => {
                const isSelected = selectedPkgId === pkg.id;
                return (
                  <div 
                    key={pkg.id}
                    onClick={() => handlePackageSelect(pkg)}
                    className={`
                      border rounded-lg py-2 px-3 flex flex-col items-center justify-center cursor-pointer min-h-[70px] transition-all
                      ${isSelected 
                        ? 'border-[#FE2C55] bg-red-50/50' 
                        : 'border-gray-200 hover:bg-gray-50'
                      }
                    `}
                  >
                    {pkg.isCustom ? (
                       <>
                         <div className="flex items-center gap-1 mb-0.5">
                           <CoinIcon className="w-4 h-4" />
                           <span className="font-bold text-lg">Custom</span>
                         </div>
                         <span className="text-gray-400 text-xs">Large amount supported</span>
                       </>
                    ) : (
                      <>
                        <div className="flex items-center gap-1 mb-0.5">
                          <CoinIcon className="w-4 h-4" />
                          <span className="font-bold text-lg">{pkg.coins.toLocaleString('en-US')}</span>
                        </div>
                        <span className="text-gray-500 font-medium text-xs">US{pkg.price.toLocaleString('en-US', { style: 'currency', currency: 'USD', minimumFractionDigits: 2 })}</span>
                      </>
                    )}
                  </div>
                );
              })}
            </div>
          </div>

          {/* Footer */}
          <div className="mt-2 border-t p-4 pb-6 bg-white z-20 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)]">
            <div className="flex flex-col gap-1.5 mb-3">
              <div className="flex items-center gap-2">
                <span className="text-sm font-bold text-gray-700 whitespace-nowrap">Payment method</span>
                <div className="flex items-center gap-2">
                  <VisaIcon className="h-4 w-auto" />
                  <MastercardIcon className="h-4 w-auto" />
                  <DinersClubIcon className="h-4 w-auto" />
                  <DiscoverIcon className="h-4 w-auto" />
                  <PayPalIcon className="h-4 w-auto" />
                </div>
              </div>

              <div className="font-bold text-sm text-gray-900">
                Total: US{(selectedPkgId ? pendingPrice : 0).toLocaleString('en-US', { style: 'currency', currency: 'USD', minimumFractionDigits: 2 })}
              </div>
            </div>

            <button 
              onClick={onRechargeClick}
              disabled={!selectedPkgId}
              className={`w-full text-white font-bold py-3 rounded text-[17px] transition-all
                ${selectedPkgId 
                  ? 'bg-[#FE2C55] opacity-100 active:scale-[0.99]' 
                  : 'bg-[#FE2C55] opacity-50 cursor-not-allowed'
                }`}
            >
              Recharge
            </button>
          </div>
        </div>
      );

      const CustomAmountModal = ({ 
        isOpen, 
        customCoins, 
        setCustomCoins, 
        onClose, 
        handleCustomRecharge 
      }) => {
        if (!isOpen) return null;

        const handleKeypadPress = (val) => {
          if (customCoins.length < 7) {
            setCustomCoins((prev) => prev + val);
          }
        };
        const handleKeypadDelete = () => {
          setCustomCoins((prev) => prev.slice(0, -1));
        };

        const currentCoins = parseInt(customCoins || '0', 10);
        const estimatedPrice = currentCoins * EXCHANGE_RATE;

        return (
          <div className="fixed inset-0 bg-black/50 z-50 flex flex-col justify-end">
            <div className="bg-white rounded-t-xl w-full max-w-md mx-auto animate-slide-up flex flex-col shadow-2xl max-h-[70vh]">
              <div className="flex items-center justify-between px-3 py-2 relative">
                <button onClick={onClose} className="p-1 z-10">
                   <ChevronLeft className="w-6 h-6" />
                </button>
                <div className="absolute inset-0 flex items-center justify-center font-bold text-[17px]">Custom</div>
                <button className="p-1 z-10">
                   <HelpCircle className="w-6 h-6 text-gray-700" />
                </button>
              </div>

              <div className="px-6 mt-2 mb-2">
                <div className="flex items-center gap-1 mb-2">
                  <span className="font-bold text-gray-900 text-[15px]">Number of Coins</span>
                  <ChevronDown className="w-4 h-4 text-gray-500" />
                </div>

                <div className="flex items-center gap-2">
                   <CoinIcon className="w-7 h-7" />
                   <span className="text-3xl font-bold tracking-tight">{customCoins || ''}</span>
                   {customCoins === '' && <span className="w-0.5 h-7 bg-[#FE2C55] animate-pulse"></span>}
                </div>
              </div>

              <div className="bg-white pb-4">
                <Keypad onPress={handleKeypadPress} onDelete={handleKeypadDelete} />
                
                <div className="px-4 mt-1">
                  <div className="flex justify-between items-center mb-2 px-1">
                    <span className="font-bold text-gray-900 text-sm">Total</span>
                    <span className="font-bold text-gray-900 text-sm">{estimatedPrice.toLocaleString('en-US', { style: 'currency', currency: 'USD', minimumFractionDigits: 2 })}</span>
                  </div>
                  <button 
                    onClick={handleCustomRecharge}
                    disabled={!currentCoins}
                    className={`w-full text-white font-bold py-3 rounded-lg text-lg transition-opacity ${currentCoins ? 'bg-[#FE2C55]' : 'bg-gray-300'}`}
                  >
                    Recharge
                  </button>
                </div>
              </div>
            </div>
          </div>
        );
      };

      const OrderSummaryModal = ({ screen, username, pendingCoins, pendingPrice, setScreen, handlePayNow }) => {
        if (screen !== 'SUMMARY') return null;

        return (
          <div className="fixed inset-0 bg-black/50 z-50 flex items-end sm:items-center sm:justify-center">
            <div className="bg-white w-full max-w-md mx-auto rounded-t-2xl sm:rounded-2xl p-4 animate-slide-up">
              <div className="flex justify-between items-center mb-6">
                <h2 className="text-xl font-bold">Order summary</h2>
                <button onClick={() => setScreen('HOME')}>
                  <XIcon className="w-6 h-6 text-gray-500" />
                </button>
              </div>

              <div className="flex justify-between items-center mb-4 text-sm">
                <span className="font-bold text-gray-900">Account</span>
                <span className="text-gray-900 font-medium">@{username || 'username'}</span>
              </div>

              <div className="flex justify-between items-center mb-2">
                <span className="text-gray-500">{pendingCoins.toLocaleString('en-US')} coins</span>
                <span className="text-gray-500">{pendingPrice.toLocaleString('en-US', { style: 'currency', currency: 'USD', minimumFractionDigits: 2 })}</span>
              </div>
              <div className="flex justify-between items-center mb-8">
                <span className="font-bold text-gray-900">Total</span>
                <span className="font-bold text-gray-900 text-lg">{pendingPrice.toLocaleString('en-US', { style: 'currency', currency: 'USD', minimumFractionDigits: 2 })}</span>
              </div>

              <div className="mb-6">
                <p className="text-gray-500 text-sm mb-2">Select a payment method</p>
                <div className="flex items-center gap-2">
                  <VisaIcon className="h-6" />
                  <span className="font-medium text-gray-700">866***********82</span>
                </div>
              </div>

              <div className="text-xs text-gray-400 space-y-4 mb-6">
                 <p>By clicking "Pay now", you agree to our Terms of Purchase for Coins. By using any amount of Coins within 14 days after clicking "Pay Now," you acknowledge and confirm that you will no longer be eligible for a refund of this order.</p>
                 <p>To assess your tax rate in accordance with our <span className="font-bold text-gray-600">Privacy Policy</span>, TikTok detected that your location is <span className="font-bold text-gray-600">New York, New York, New York, United States</span></p>
              </div>

              <button 
                onClick={handlePayNow}
                className="w-full bg-[#FE2C55] text-white font-bold py-3.5 rounded-lg text-lg hover:bg-[#d62346] active:scale-[0.98] transition"
              >
                Pay now
              </button>
            </div>
          </div>
        );
      };

      const ProcessingModal = ({ screen, setScreen }) => {
        useEffect(() => {
          if (screen !== 'PROCESSING') return;
          const successTimer = setTimeout(() => {
            setScreen('SUCCESS');
          }, 1000);
          return () => clearTimeout(successTimer);
        }, [screen, setScreen]);

        if (screen !== 'PROCESSING') return null;

        return (
          <div className="fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4">
            <div className="bg-white w-full max-w-sm rounded-2xl p-8 flex flex-col items-center shadow-2xl">
               <div className="relative w-12 h-12 mb-6">
                 <div className="absolute top-0 left-0 w-6 h-6 bg-[#FE2C55] rounded-full animate-bounce delay-75"></div>
                 <div className="absolute top-0 right-0 w-6 h-6 bg-[#25F4EE] rounded-full animate-bounce"></div>
               </div>
               
               <h3 className="text-xl font-bold mb-2">Processing your payment</h3>
               <p className="text-gray-400 mb-6">This could take few seconds</p>
               
               <div className="text-gray-500 font-medium">05:00</div>
            </div>
          </div>
        );
      };

      const SuccessModal = ({ screen, pendingCoins, handleDeduct }) => {
        if (screen !== 'SUCCESS') return null;

        return (
          <div className="fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4">
            <div className="bg-white w-full max-w-sm rounded-2xl p-6 flex flex-col items-center animate-scale-in">
               <div className="w-20 h-20 bg-[#25F4EE] rounded-full flex items-center justify-center mb-6 shadow-sm">
                  <Check className="w-10 h-10 text-white" />
               </div>

               <h2 className="text-lg font-bold mb-4">Payment Completed</h2>
               
               <div className="text-center text-gray-500 mb-6 px-4">
                 <p className="mb-4">You recharged {pendingCoins.toLocaleString('en-US')} Coins. You can use Coins to send virtual gifts.</p>
                 <p className="text-sm">This operation has been completed. It will be processed within 24 hours!</p>
               </div>

               <button 
                 onClick={handleDeduct}
                 className="w-40 bg-[#FE2C55] text-white font-bold py-3 rounded-lg shadow-sm hover:bg-[#d62346] active:scale-95 transition"
               >
                 Go Back
               </button>
            </div>
          </div>
        );
      };

      const App = () => {
        const [balance, setBalance] = useState(200000000);
        const [screen, setScreen] = useState('HOME');
        const [username, setUsername] = useState('martinthemieng');
        const [customCoins, setCustomCoins] = useState('');
        const [selectedPkgId, setSelectedPkgId] = useState(null);
        const [pendingCoins, setPendingCoins] = useState(0);
        const [pendingPrice, setPendingPrice] = useState(0);

        const handlePackageSelect = (pkg) => {
          if (pkg.isCustom) {
            setCustomCoins('');
            setScreen('CUSTOM');
          } else {
            setSelectedPkgId(pkg.id);
            setPendingCoins(pkg.coins);
            setPendingPrice(pkg.price);
          }
        };

        const handleCustomRecharge = () => {
          const coins = parseInt(customCoins, 10);
          if (!coins || coins <= 0) return;
          
          setPendingCoins(coins);
          setPendingPrice(coins * EXCHANGE_RATE);
          setScreen('SUMMARY');
        };

        const handleRechargeClick = () => {
          if (selectedPkgId) {
            setScreen('SUMMARY');
          }
        };

        const handlePayNow = () => {
          setScreen('PROCESSING');
        };

        const handleDeduct = () => {
          setBalance((prev) => Math.max(0, prev - pendingCoins));
          setScreen('HOME');
          setSelectedPkgId(null);
          setPendingCoins(0);
          setPendingPrice(0);
        }

        return (
          <div className="max-w-md mx-auto bg-gray-50 min-h-screen relative shadow-lg overflow-hidden">
            <HomeView 
              balance={balance} 
              username={username} 
              setUsername={setUsername}
              handlePackageSelect={handlePackageSelect} 
              selectedPkgId={selectedPkgId}
              pendingPrice={pendingPrice}
              onRechargeClick={handleRechargeClick}
            />
            
            <CustomAmountModal
              isOpen={screen === 'CUSTOM'}
              customCoins={customCoins} 
              setCustomCoins={setCustomCoins} 
              onClose={() => setScreen('HOME')}
              handleCustomRecharge={handleCustomRecharge}
            />
            
            <OrderSummaryModal 
              screen={screen}
              username={username}
              pendingCoins={pendingCoins}
              pendingPrice={pendingPrice}
              setScreen={setScreen}
              handlePayNow={handlePayNow}
            />
            <ProcessingModal screen={screen} setScreen={setScreen} />
            <SuccessModal screen={screen} pendingCoins={pendingCoins} handleDeduct={handleDeduct} />
          </div>
        );
      };

      const root = ReactDOM.createRoot(document.getElementById('root'));
      root.render(<App />);
    </script>
  </body>
</html>